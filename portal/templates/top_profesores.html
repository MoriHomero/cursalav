{% extends 'base.html' %}

{% load custom_filters %}

{% block title %}Cursala - Top 10 Profesores{% endblock %}

{% block content %}
<style>
/* Estilos generales */


/* Contenedor principal */
.container {
    max-width: 700px;
    margin: 0 auto;
    padding: 0.5rem;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
}

/* Estilo para el formulario de filtro */
.filter-form {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    margin-bottom: 0.5rem;
    gap: 0.5rem; /* Espacio entre el select y el bot√≥n */
}

.filter-form select {
    font-size: 0.85rem;
    padding: 0.3rem;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.filter-form button {
    font-size: 0.85rem;
    padding: 0.4rem 0.6rem;
    background-color: #005b96 !important;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.filter-form button:hover {
    background-color: #002244;
}

/* Estilo para la lista de profesores */
.profesor-lista {
    list-style: none;
    padding: 0;
}

.profesor-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.7rem 0;
    border-bottom: 1px solid #ddd;
    font-size: 0.9rem;
}

.profesor-item:last-child {
    border-bottom: none;
}

.ranking {
    font-size: 1.3rem;
    font-weight: bold;
    color: #333333;
    flex-basis: 5%;
    text-align: center;
}

.profesor-info {
    flex-grow: 1;
    margin-left: 0.5rem;
}

.profesor-nombre {
    font-size: 1rem;
    color: #2980B9;
    font-weight: bold;
    display: flex;
    align-items: center;
}

.profesor-promedio {
    color: #2F9E66;
    font-size: 0.9rem;
    margin-left: 0.5rem;
}

.profesor-facultades {
    color: #777;
    font-size: 0.85rem;
    margin-left: 0.5rem;
}

.details-link {
    font-size: 0.85rem;
    color: #003366;
    text-decoration: underline;
    margin-left: 1rem;
    transition: color 0.3s ease;
}

.details-link:hover {
    color: #003366;
}

/* Media queries */
@media (max-width: 1930px) {
    .container {
        max-width: 600px;
    }

    h1 {
        margin-top: 8px;
        margin-bottom: 0.7rem;
        font-size: 1.75rem;
        color: #0e294b;
        font-family: 'Montserrat', sans-serif; 
    }

    .filter-form select,
    .filter-form button {
        font-size: 0.75rem;
    }

    .profesor-item {
        padding: 0.4rem 0;
    }

    .ranking {
        font-size: 0.8rem;
    }

    .profesor-nombre {
        font-size: 0.75rem;
    }

    .details-link {
        font-size: 0.75rem;
    }
}

@media (max-width: 768px) {
    h1 {
        font-size: 1.25rem;
    }

    .description {
        font-size: 0.9rem;
        max-width: 95%;
    }

    .profesor-item {
        flex-direction: column;
        align-items: flex-start;
    }

    .ranking, .details-link {
        margin-bottom: 0.5rem;
    }

    .profesor-info {
        flex-basis: 100%;
    }

    .details-link {
        margin-left: 0;
        font-size: 0.85rem;
    }
}

@media (max-width: 576px) {
    h1 {
        font-size: 1.2rem;
    }

    .description {
        font-size: 0.85rem;
        max-width: 100%;
    }

    .ranking {
        font-size: 0.9rem;
    }

    .profesor-nombre {
        font-size: 0.9rem;
    }

    .details-link {
        font-size: 0.75rem;
    }
}
</style>

<h1>Top 10 Profesores</h1>
<p class="description">
    Esta lista muestra los 10 mejores profesores basados en el puntaje promedio que los alumnos les asignan.
</p>
<div class="container">
    <div class="filter-form">
        <form method="get" id="filterForm">
            <select name="facultad" id="facultad" class="form-control" onchange="submitForm()">
                <option value="">Universidad</option>
                {% for facultad in facultades %}
                <option value="{{ facultad.id }}" {% if facultad.id|stringformat:"s" == request.GET.facultad %}selected{% endif %}>
                    {{ facultad.nombre|extract_parentheses }}
                </option>
                {% endfor %}
            </select>
        </form>
        
        <script>
            function submitForm() {
                document.getElementById('filterForm').submit();
            }
        </script>        
    </div>

    <ul class="profesor-lista">
        {% for profesor in profesores %}
        <li class="profesor-item">
            <div class="ranking">{{ forloop.counter }}</div>
            <div class="profesor-info">
                <div class="profesor-nombre">
                    {{ profesor.nombre }}
                    <span class="profesor-promedio">({{ profesor.promedio|floatformat:2 }})</span>
                    <span class="profesor-facultades">
                        {% for facultad in profesor.facultades.all %}
                            {{ facultad.nombre|extract_parentheses }}
                            {% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </span>
                </div>
            </div>
            <a href="{% url 'profesor_detail' profesor.pk %}" class="details-link">Ver detalles</a>
        </li>
        {% endfor %}
    </ul>
</div>

{% endblock %}
